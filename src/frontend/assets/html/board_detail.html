<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="keywords" content="HTML5 Template" />
    <meta
      name="description"
      content="Webster - Responsive Multi-purpose HTML5 Template"
    />
    <meta name="author" content="potenzaglobalsolutions.com" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <title>FavSpot - BoardDetail</title>

    <!-- Favicon -->
    <link
      rel="shortcut icon"
      href="https://everyplacetest.s3.ap-northeast-2.amazonaws.com/dev/fav.png"
    />

    <!-- font -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,500,500i,600,700,800,900|Poppins:200,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
    />

    <!-- Plugins -->
    <link rel="stylesheet" type="text/css" href="../css/plugins-css.css" />

    <!-- Typography -->
    <link rel="stylesheet" type="text/css" href="../css/typography.css" />

    <!-- Shortcodes -->
    <link
      rel="stylesheet"
      type="text/css"
      href="../css/shortcodes/shortcodes.css"
    />

    <!-- Style -->
    <link rel="stylesheet" type="text/css" href="../css/style.css" />
    <link rel="stylesheet" type="text/css" href="../css/modal.css" />

    <!-- Responsive -->
    <link rel="stylesheet" type="text/css" href="../css/responsive.css" />

    <!-- map -->
    <script
      type="text/javascript"
      src="//dapi.kakao.com/v2/maps/sdk.js?appkey=8166b325e80b4bce3d1d6b725fbbba9f&libraries=services,clusterer,drawing"
    ></script>
    <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=8166b325e80b4bce3d1d6b725fbbba9f"></script>
    <script type="module" src="../js/maps/event.js"></script>
    <script type="module" src="../js/maps/data.js"></script>
    <script type="module" src="../js/maps/map.js"></script>
    <link rel="stylesheet" href="../css/map.css" />

    <!-- custom css-->
    <style>
      .img-profile {
        width: 100%;
        height: 100px;
      }

      .comment-userinfo {
        display: flex;
        gap: 10px;
        align-items: center;
        margin-bottom: 20px;
      }

      .board-box {
        border: 5px solid #84ba3f;
        border-radius: 30px;
        padding: 20px;
        margin-top: 50px;
      }

      .board-box-modal {
        border: 5px solid #84ba3f;
        border-radius: 30px;
        padding: 20px;
        margin-top: 50px;
        background-color: white;
      }

      .button-like {
        border: 2px solid #8a8a8a;
        background-color: transparent;
        text-decoration: none;
        padding: 1rem;
        position: relative;
        vertical-align: middle;
        text-align: center;
        display: inline-block;
        border-radius: 3rem;
        color: #8a8a8a;
        transition: all ease 0.4s;
        margin-right: 30px;
        height: 55px;
        width: 110px;
        font-size: inherit;
      }

      .button-like span {
        margin-left: 0.5rem;
      }

      .button-like .fa,
      .button-like span {
        transition: all ease 0.4s;
      }

      .button-like:focus {
        background-color: transparent;
        border-color: #7e7e7e;
      }

      .button-like:focus .fa,
      .button-like:focus span {
        color: #8a8a8a;
      }

      .button-like:hover {
        border-color: #ffc107;
        background-color: transparent;
      }

      .button-like:hover .fa,
      .button-like:hover span {
        color: #ffc107;
      }

      .liked {
        background-color: #ffc107;
        border-color: #ffc107;
      }

      .liked .fa,
      .liked span {
        color: #fefefe;
      }

      .liked:focus {
        background-color: #ffc107;
      }

      .liked:focus .fa,
      .liked:focus span {
        color: #fefefe;
      }

      .liked:hover {
        background-color: #ffc107;
        border-color: #ffc107;
      }

      .liked:hover .fa,
      .liked:hover span {
        color: #fefefe;
      }

      .title-liked-box {
        display: flex;
        justify-content: space-between;
      }

      .fa-times {
        font-size: 18px;
        margin-left: 7px;
      }

      .fa-edit,
      .fa-lock,
      .fa-save,
      .fa-trash,
      .fa-unlock {
        font-size: 40px;
      }

      .comments-1 .comments-info {
        width: 88%;
      }

      .comments-1 .comments-info .theme-color {
        display: flex;
        justify-content: space-between;
        margin-bottom: 15px;
      }

      .comments-info p {
        font-size: medium;
      }

      .icons-box,
      .icons-box1 {
        display: flex;
        justify-content: space-between;
      }

      .icons-box button {
        border: none;
        background: none;
      }

      .icons-box1 button {
        border: none;
        background: none;
      }

      .fa-trash {
        color: #bf6447;
      }

      .fa-edit,
      .fa-save {
        color: #3e59c3;
      }

      .user-email {
        background-color: #f7f7f7;
        padding: 20px;
      }

      .comments-info .fa-times {
        display: flex;
        flex-direction: row-reverse;
        color: #bf6447;
      }

      .port-post {
        position: relative;
      }

      .fa-times-rectangle {
        font-size: 30px;
        border: none;
        background: none;
        position: absolute;
        top: 10px;
        right: 10px;
        color: #bf6447;
      }

      .input-board-title {
        border: 3px solid gray;
        border-radius: 10px;
        background-color: #e8f4ff;
        color: black;
        padding: 10px;
        width: 100%;
      }

      .input-tag-box {
        display: flex;
      }

      .input-tag {
        padding: 10px;
        border-radius: 10px;
        font-size: medium;
        color: black;
        border: 3px solid gray;
        flex: 70;
      }

      .button-tag {
        padding: 10px;
        margin-left: 10px;
        border: 3px solid gray;
        border-radius: 10px;
        color: black;
        background-color: #e8f4ff;
        font-weight: bold;
        flex: 20;
        font-size: medium;
      }

      .fa-lock,
      .fa-unlock {
        color: #626262;
      }

      .fa-lock:hover,
      .fa-unlock:hover {
        color: #84ba3f;
      }

      .pin-thumbnail-img {
        width: 160px;
        height: 160px;
      }

      .modal-content {
        width: 900px;
        position: absolute;
        top: 50%;
        right: -3%;
      }

      .pin-thumbnail-img {
        width: 160px;
        height: 160px;
      }

      .img-fluid {
        height: 100px;
      }

      .modal-title {
        width: 800px;
      }

      .blog-entry .entry-image img {
        width: 800px;
        height: 400px;
      }
    </style>
  </head>

  <body>
    <div class="wrapper">
      <!--================================= preloader -->

      <div id="pre-loader">
        <img
          class="img-fluid d-block mx-auto"
          src="../img/pre-loader/loader-03.svg"
          alt=""
        />
      </div>

      <!--================================= preloader -->

      <header
        id="header"
        class="header light logo-center"
        style="background-color: beige"
      >
        <nav
          id="menu"
          class="mega-menu d-flex align-items-center"
          style="min-height: 60px"
        >
          <!-- menu list items container -->
          <div class="col-lg-12 col-md-12">
            <!-- menu logo -->
            <div
              id="headerContent"
              class="position-relative"
              style="width: 95vw"
            >
              <a href="../../index.html">
                <img
                  id="logo_img"
                  src="https://everyplacetest.s3.ap-northeast-2.amazonaws.com/dev/big_logo.png"
                  alt="logo"
                  style="width: 80px; height: 60px"
                  class="mx-auto d-block"
                />
              </a>

              <div class="shpping-cart position-absolute top-0 end-0 mt-2">
                <a class="cart-btn" href="#">
                  <img
                    class="profileImg"
                    src="https://everyplacetest.s3.ap-northeast-2.amazonaws.com/dev/user_default_clear.png"
                    alt=""
                    style="object-fit: cover; width: 45px; height: 45px"
                  />
                </a>
                <div class="cart">
                  <div class="cart-title">
                    <h6 id="email" class="uppercase mb-0"></h6>
                  </div>
                  <div class="cart-item">
                    <div class="cart-name clearfix">
                      <a href="user_info.html">User Detail</a>
                    </div>
                  </div>
                  <div class="cart-total">
                    <a class="button" href="profile_edit.html">Profile Edit</a>
                    <a id="logout" class="button black" href="#">Logout</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </nav>
        <!-- menu end -->
      </header>

      <!--================================= header -->

      <!--================================= modal-popovers -->

      <section class="page-section-ptb">
        <div class="container">
          <div class="row">
            <div class="main">
              <div class="blog-entry mb-10">
                <div class="entry-image clearfix">
                  <!--지도 넣어야함-->
                  <div style="display: flex; width: 1600px; margin-left: 90px">
                    <div class="map_wrap" style="height: 700px">
                      <div id="map"></div>
                    </div>
                  </div>
                </div>

                <!-- 보드 -->
                <div class="board-box">
                  <div class="icons-box1">
                    <i class="fa fa-lock"></i>
                    <div class="settings-box mr-30">
                      <button
                        id="editButton"
                        data-bs-toggle="modal"
                        data-bs-target=".bd-example-modal-lg"
                      >
                        <i class="fa fa-edit mr-20"></i>
                      </button>
                      <button id="deleteButton">
                        <i class="fa fa-trash"></i>
                      </button>
                    </div>
                  </div>
                  <div class="blog-detail" style="padding: 30px 30px 10px 30px">
                    <div class="title-liked-box">
                      <h1>
                        <span class="board-title"></span>
                      </h1>
                      <button class="button button-like">
                        <i class="fa fa-star"></i>
                        <span>Like</span>
                      </button>
                    </div>
                    <div class="entry-meta mb-10">
                      <ul>
                        <li>
                          <i class="fa fa-user-circle-o"></i>
                          <a href="#">
                            <span class="board-userId">작성자ID</span></a
                          >
                        </li>
                        <li>
                          <a href="#">
                            <i class="fa fa-calendar-o"></i>
                            <span class="board-createdAt">12 Aug 2021</span></a
                          >
                        </li>
                        <li>
                          <a href="#">
                            <i class="fa fa-star"></i>
                            <span class="board-likedCnt">좋아요개수</span></a
                          >
                        </li>
                      </ul>
                    </div>
                  </div>
                  <!-- ================================================ -->

                  <!-- ================================================ -->
                  <div>
                    <div class="entry-share clearfix">
                      <div class="tags mb-40">
                        <h3 class="theme-color mt-20 mb-20">Tags</h3>
                        <div class="board-tags"></div>
                      </div>
                    </div>
                  </div>
                  <!-- ================================================ -->
                  <!-- ================================================ -->
                  <h3 class="theme-color">Pins</h3>
                  <div class="pins-box">
                    <div class="port-post clearfix mt-20">
                      <div class="pins-container"></div>
                    </div>
                  </div>

                  <!-- ================================================ -->

                  <!-- ================================================ -->
                  <div class="blog-comments mt-40">
                    <h3 class="theme-color mb-30">Reply</h3>
                    <div class="comments-container"></div>
                  </div>
                  <!-- ================================================ -->
                  <br />
                  <div class="row">
                    <div class="col-lg-12 col-md-12">
                      <h3 class="theme-color mb-30">Leave a Reply</h3>
                      <div class="row">
                        <div class="col-lg-12 col-md-12">
                          <div id="formmessage">
                            Success/Error Message Goes Here
                          </div>
                        </div>
                      </div>
                      <form id="commentForm" class="gray-form row" role="form">
                        <div class="comment-userinfo">
                          <div class="comments-photo">
                            <img
                              class="img-profile"
                              src=""
                              alt=""
                            />
                          </div>

                          <div
                            class="col-lg-6 col-md-6 col-sm-6"
                            style="width: 300px"
                          >
                            <div class="mb-3">
                              <h5 class="user-email theme-color"></h5>
                            </div>
                          </div>
                        </div>

                        <div class="col-lg-12 col-md-12">
                          <div class="mb-3">
                            <textarea
                              id="commentText"
                              class="form-control"
                              rows="7"
                              placeholder="comment"
                            ></textarea>
                          </div>
                        </div>

                        <div class="col-lg-12 col-md-12">
                          <input
                            type="hidden"
                            name="action"
                            value="sendEmail"
                          />
                          <button id="submit" type="submit" class="button">
                            <span>Submit Now</span>
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
                <!-- ================================================ -->
              </div>
            </div>
            <div class="col-lg-12 col-md-12">
              <div
                class="modal fade bd-example-modal-lg"
                tabindex="-1"
                role="dialog"
                aria-labelledby="myLargeModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                    <div class="modal-header align-items-start">
                      <div class="modal-title" id="exampleModalLongTitle">
                        <div class="section-title mb-10">
                          <div class="blog-entry mb-10">
                            <div class="board-box-modal" style="width: 830px">
                              <div class="icons-box">
                                <div class="icon-lock-box">
                                  <button>
                                    <i class="fa fa-lock"></i>
                                  </button>
                                  <button>
                                    <i class="fa fa-unlock"></i>
                                  </button>
                                </div>
                                <div class="icn-save-box">
                                  <button id="save-button">
                                    <i class="fa fa-save"></i>
                                  </button>
                                </div>
                              </div>
                              <div class="blog-detail">
                                <div class="title-box">
                                  <h1><input class="input-board-title" /></h1>
                                </div>
                              </div>

                              <div class="mt-20 mb-30 post-1">
                                <div class="entry-share">
                                  <div class="tags mb-40" style="width: 100%">
                                    <h3 class="theme-color mt-20 mb-20">
                                      Tags
                                    </h3>
                                    <div class="input-tag-box mb-20">
                                      <input
                                        type="text"
                                        id="new-tag-input"
                                        class="input-tag"
                                        placeholder="새 태그 입력"
                                      />
                                      <button
                                        id="add-tag-button"
                                        class="button-tag"
                                      >
                                        ADD
                                      </button>
                                    </div>

                                    <div class="board-tags2"></div>
                                  </div>
                                </div>
                              </div>

                              <h3 class="theme-color">Pins</h3>
                              <div class="pins-box">
                                <div class="port-post clearfix mt-20">
                                  <div class="pins-container2"></div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal"
                      >
                        Close
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 핀 상세보기 모달 -->
            <div
              id="myModal"
              class="modal fade bd-example-modal-lg"
              tabindex="-1"
              role="dialog"
              aria-labelledby="myLargeModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header align-items-start">
                    <div class="modal-title" id="exampleModalLongTitle">
                      <div class="section-title mb-10">
                        <div class="blog-entry mb-10">
                          <div class="entry-image clearfix">
                            <img
                              class="img-fluid subscribe-icon"
                              src=""
                              alt=""
                            />
                          </div>
                          <div class="blog-detail">
                            <div class="title-wrap">
                              <h1 id="myModalLabel">Pin title</h1>
                              <button
                                id="saveButton"
                                class="button button-border mt-2 mb-3 form-button"
                              >
                                핀 저장
                              </button>
                            </div>
                            <!-- 핀 생성 step (숨김) -->
                            <div id="pinCreationSteps" style="display: none">
                              <div id="step1" class="step">
                                <!-- 보드 선택 드롭다운 -->
                                <label for="boardSelection" class="form-label"
                                  >내 보드 목록</label
                                >
                                <select
                                  id="boardSelection"
                                  name="boards"
                                  class="form-select"
                                >
                                  <!-- 유저 보드 목록 추가될 부분 -->
                                </select>
                              </div>
                              <div
                                id="step2"
                                class="step"
                                style="display: none"
                              >
                                <!-- 사진 업로드 (선택사항)-->
                                <label for="photoUpload" class="form-label"
                                  >사진 업로드</label
                                >
                                <input
                                  type="file"
                                  id="photoUpload"
                                  class="form-control"
                                />
                                <!-- 텍스트 입력 (선택사항)-->
                                <label for="textInput" class="form-label"
                                  >내용 작성</label
                                >
                                <textarea
                                  id="textInput"
                                  rows="4"
                                  class="form-control"
                                ></textarea>
                              </div>
                              <div class="buttons-wrap">
                                <button
                                  id="saveNextButton"
                                  class="button button-border mt-2 mb-3 form-button"
                                >
                                  코멘트 쓰기
                                </button>
                                <button
                                  id="createButton"
                                  class="button-border mt-2 mb-3 btn btn-outline-primary"
                                >
                                  저장
                                </button>
                              </div>
                            </div>
                            <div class="entry-meta mb-30">
                              <ul>
                                <li>
                                  <i class="fa fa-map"></i>
                                  <a href="#" id="modalCategory">category</a>
                                </li>
                                <li>
                                  <i class="fa fa-calendar-o"></i>
                                  <a href="#" id="modalUpdatedAt"
                                    >12 Aug 2021</a
                                  >
                                </li>
                                <li>
                                  <i class="fa fa-map-pin"></i>
                                  <a href="#" id="modalPinCount">5</a>
                                </li>
                              </ul>
                            </div>
                            <div class="entry-content">
                              <p id="modalNewAddress" class="mt-3 mb-1">
                                New Address
                              </p>
                              <p id="modalOldAddress" class="mt-3 mb-1">
                                Old Address
                              </p>
                              <ul class="list list-arrow mt-30" id="modalMenu">
                                <!-- 각각의 메뉴가 삽입될 공간 -->
                              </ul>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <button
                      type="button"
                      class="close btn btn-lg p-0"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    >
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>

                  <!-- 핀 콘텐츠가 만들어질 컨테이너 -->
                  <div id="pinContentsContainer" class="modal-body">
                    <div class="port-post clearfix">
                      <div class="port-post-photo">
                        
                      </div>
                      <div class="port-post-info">
                        <h3 class="theme-color">Kevin Martin</h3>
                        <button type="button" class="close btn btn-lg p-0">
                          <span>&times;</span>
                        </button>
                        <p>P</p>
                      </div>
                    </div>
                  </div>
                  <!-- 페이지 버튼 -->
                  <div class="col-lg-12 col-md-12">
                    <nav aria-label="Page navigation example">
                      <ul
                        id="pagination"
                        class="pagination justify-content-center"
                      >
                        <li id="previousButton" class="page-item disabled">
                          <a class="page-link" href="#" tabindex="-1">
                            <i class="fa fa-chevron-left"></i>
                          </a>
                        </li>
                        <!-- 페이지 숫자 생성 공간 -->
                        <li id="nextButton" class="page-item">
                          <a class="page-link" href="#">
                            <i class="fa fa-chevron-right"></i>
                          </a>
                        </li>
                      </ul>
                    </nav>
                  </div>

                  <div class="modal-footer">
                    <button
                      type="button"
                      class="btn btn-secondary"
                      data-bs-dismiss="modal"
                    >
                      Close
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div id="back-to-top">
      <a class="top arrow" href="#top">
        <i class="fa fa-angle-up"></i>
        <span>TOP</span></a
      >
    </div>

    <footer class="footer footer-topbar">
      <div class="copyright pt-10 pb-0" style="background-color: beige">
        <div class="container m-0">
          <div class="row d-flex justify-content-between" style="width: 100vw">
            <div class="col-lg-6" style="width: 550px">
              <img
                class="img-fluid mb-10 ml-20"
                style="height: 50px"
                src="https://everyplacetest.s3.ap-northeast-2.amazonaws.com/dev/horizontal_logo.png"
                alt=""
              />
              <div style="color: #555">
                <p class="ml-20">
                  &copy;Copyright
                  <span id="copyright">
                    <script>
                      document
                        .getElementById("copyright")
                        .appendChild(
                          document.createTextNode(new Date().getFullYear())
                        );
                    </script>
                    by
                    <a href="#" style="color: #ff5757"> FavSpot. </a> </span
                  >Making Every Destination Yours.
                </p>
              </div>
            </div>
            <div class="col-lg-6 mt-2" style="width: 550px">
              <div class="footer-social">
                <p class="text-start text-lg-end mr-20">
                  Leave Your Mark with
                  <a href="#" style="color: #ff5757">FavSpot</a>, Everywhere You
                  Go
                </p>
              </div>
              <div
                class="social-icons color-hover text-start text-lg-end mt-20"
              >
                <ul class="clearfix">
                  <li class="social-github">
                    <a
                      class="mr-20"
                      href="https://github.com/inslog94/FavSpot"
                      target="_blank"
                    >
                      <i class="fa fa-github"></i>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!--================================= jquery -->

    <!-- jquery -->
    <script src="../js/jquery-3.6.0.min.js"></script>

    <!-- plugins-jquery -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/foundation/6.2.4/foundation.min.js"></script>
    <script src="../js/plugins-jquery.js"></script>

    <!-- Google recaptcha -->
    <!-- <script src='https://www.google.com/recaptcha/api.js'></script> -->

    <!-- plugin_path -->
    <script>
      var plugin_path = "../js/";
    </script>

    <!-- custom -->
    <script src="../js/custom.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // 로컬 스토리지로 보드 id 값 가져오기
        const boardPk = localStorage.getItem("selectedPk");

        // 보드 공개 여부 상태 저장 변수
        let isPublic;

        // 보드 상세 정보 가져오기 위한 통신
        fetch(`http://3.34.148.72:8000/board/${boardPk}/`, {
          credentials: "include",
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => response.json())
          .then((data) => {
            // 공개 / 비공개 보드 표시 (모달)
            const lockIcon2 = document.querySelector(".icon-lock-box .fa-lock");
            const unlockIcon2 = document.querySelector(
              ".icon-lock-box .fa-unlock"
            );

            if (data.board.is_public) {
              unlockIcon2.style.display = "inline";
              lockIcon2.style.display = "none";
            } else {
              lockIcon2.style.display = "inline";
              unlockIcon2.style.display = "none";
            }

            unlockIcon2.addEventListener("click", function () {
              unlockIcon2.style.display = "none";
              lockIcon2.style.display = "inline";

              isPublic = false; // 비공개로 변경
            });

            lockIcon2.addEventListener("click", function () {
              lockIcon2.style.display = "none";
              unlockIcon2.style.display = "inline";

              isPublic = true; // 공개로 변경
            });

            // 보드 이름
            const boardTitleElement =
              document.querySelector(".input-board-title");
            boardTitleElement.value = data.board.title;

            // 보드 태그 (모달)
            const ulElement = document.createElement("ul"); // <ul> 요소 생성

            data.board.tags.forEach((tag) => {
              const liElement = createNewLiElement(tag); // 태그 생성 함수 호출
              ulElement.appendChild(liElement); // <li> 요소를 <ul>요 소의 자식으로 추가
            });

            const boardTagsElement = document.querySelector(".board-tags2");
            boardTagsElement.appendChild(ulElement);

            // 핀 목록 (모달)
            const containerElement = document.querySelector(".pins-container2");

            data.pins.forEach((pin, index) => {
              const postElement = document.createElement("div");
              postElement.classList.add("port-post", "clearfix", "bg-white");
              postElement.dataset.id = pin.id; // data-id 속성 설정

              if (index === 0) {
                postElement.classList.add("mt-20");
              } else {
                postElement.classList.add("mt-40", "mb-20");
              }

              const boxElement = document.createElement("div");
              boxElement.classList.add("pins-box");

              const photoDivElement = document.createElement("div");
              photoDivElement.classList.add("port-post-photo");

              const imgElement = document.createElement("img");
              imgElement.src = pin.thumbnail_img;
              imgElement.classList.add("pin-thumbnail-img");

              photoDivElement.appendChild(imgElement);

              const infoDivElement = document.createElement("div");
              infoDivElement.classList.add("port-post-info");

              const h3Element = document.createElement("h3");
              h3Element.classList.add("theme-color");
              h3Element.innerHTML = `<span>상호명: </span>${pin.title}`;

              infoDivElement.appendChild(h3Element);

              let pinsInfoDiv = document.createElement("div");
              pinsInfoDiv.classList.add("pins-info");

              ["category", "new_address"].forEach((key) => {
                if (pin[key]) {
                  let h5Element = document.createElement("h5");
                  let label = "";

                  if (key === "category") {
                    label = "카테고리";
                  } else if (key === "new_address") {
                    label = "주소";
                  }

                  h5Element.innerHTML = `<span>${label}: </span>${pin[key]}`;
                  pinsInfoDiv.append(h5Element);
                }
              });

              // 삭제 아이콘을 위한 버튼 요소 생성
              const deleteButton = document.createElement("button");
              deleteButton.classList.add("fa", "fa-times-rectangle");

              infoDivElement.append(pinsInfoDiv);
              infoDivElement.appendChild(deleteButton);
              boxElement.append(photoDivElement, infoDivElement);
              postElement.append(boxElement);
              containerElement.appendChild(postElement);

              // 삭제 아이콘 클릭 시 핀 삭제
              deleteButton.addEventListener("click", function () {
                postElement.remove();
              });

              infoDivElement.appendChild(deleteButton);
            });
          })
          .catch((error) => console.error("Error:", error));

        // 새 태그 추가
        const newTagInput = document.querySelector("#new-tag-input");
        const addTagButton = document.querySelector("#add-tag-button");

        addTagButton.addEventListener("click", function () {
          const newTag = newTagInput.value;
          if (newTag) {
            const liElement = createNewLiElement(newTag); // 태그 생성 함수 호출

            const boardTagsUlElement =
              document.querySelector(".board-tags2 ul");
            boardTagsUlElement.appendChild(liElement);

            newTagInput.value = ""; // 입력 필드 초기화
          }
        });

        // 태그 생성 함수
        function createNewLiElement(tag) {
          const liElement = document.createElement("li");

          const aElement = document.createElement("a");
          aElement.href = "#";
          aElement.textContent = `${tag}`;

          const iDeleteIcon = document.createElement("i");
          iDeleteIcon.classList.add("fa", "fa-times");

          // 삭제 아이콘 클릭 시 이벤트 리스너 등록
          iDeleteIcon.addEventListener("click", function (event) {
            event.preventDefault(); // a 태그의 기본 동작 취소
            liElement.remove(); // 태그 제거
          });

          aElement.appendChild(iDeleteIcon);
          liElement.appendChild(aElement);

          return liElement;
        }

        // 수정 버튼 클릭 시 이벤트
        // 보드 수정 기능

        document
          .querySelector("#save-button")
          .addEventListener("click", function () {
            const title = document.querySelector(".input-board-title").value;
            const tags = Array.from(
              document.querySelectorAll(".board-tags2 ul li"),
              (li) => li.textContent
            );
            const pins = Array.from(
              document.querySelectorAll(".port-post"),
              (post) => Number(post.dataset.id)
            );

            const updatedBoard = {
              title: title,
              tags: tags,
              pins: pins,
              is_public: isPublic,
            };

            fetch(`http://3.34.148.72:8000/board/${boardPk}/`, {
              method: "PUT",
              credentials: "include",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(updatedBoard),
            })
              .then((response) => response.json())
              .then((data) => {
                location.reload(); // 페이지 새로고침
              })
              .catch((error) => console.error("Error:", error));
          });

        // 수정 버튼 클릭 시 이벤트
        // 보드 수정 기능

        document
          .querySelector("#save-button")
          .addEventListener("click", function () {
            const title = document.querySelector(".input-board-title").value;
            const tags = Array.from(
              document.querySelectorAll(".board-tags2 ul li"),
              (li) => li.textContent
            );
            const pins = Array.from(
              document.querySelectorAll(".port-post"),
              (post) => Number(post.dataset.id)
            );

            const updatedBoard = {
              title: title,
              tags: tags,
              pins: pins,
              is_public: isPublic,
            };

            fetch(`http://3.34.148.72:8000/board/${boardPk}/`, {
              method: "PUT",
              credentials: "include",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(updatedBoard),
            })
              .then((response) => response.json())
              .then((data) => {
                location.reload(); // 페이지 새로고침
              })
              .catch((error) => console.error("Error:", error));
          });
      });
    </script>
  </body>
</html>
